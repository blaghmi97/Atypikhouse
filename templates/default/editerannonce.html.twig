
{% extends 'base.html.twig' %}

{% block body %}
<div class="container ">
<br>
<div class="card border-info mb-3" >
  <div class="card-header">Modifier une habitat</div>
  <div class="card-body">
    {{ form_start(edit_form) }}

        <div class="form-group">
        {{ form_row(edit_form.type ,{'attr' : {'class':'form-control'}}) }}   
               
        </div>
        <div class="form-group">
                 {{ form_row(edit_form.titre,{'attr' : {'class':'form-control'}}) }}   
        </div>
        <div class="row">
        <div class="col-md-4">
         <div class="form-group">
         {{ form_row(edit_form.nombreCouchage,{'attr' : {'class':'form-control'}}) }}
            </div>
            </div>
            <div class="col-md-4">
         <div class="form-group">
          {{ form_row(edit_form.surface,{'attr' : {'class':'form-control'}}) }}
             </div>
             </div>
             <div class="col-md-4">
         <div class="form-group">
           {{ form_row(edit_form.prix,{'attr' : {'class':'form-control'}}) }}
              </div>
              </div></div>
         <div class="form-group">
            {{ form_row(edit_form.adresse,{'attr' : {'class':'form-control'}}) }}
               </div>
              <div class="row">
        <div class="col-md-4">
         <div class="form-group">
        
         {{ form_row(edit_form.codepostale,{'attr' : {'class':'form-control'}}) }}
            </div>
            </div>
            <div class="col-md-4">
         <div class="form-group">
          {{ form_row(edit_form.ville,{'attr' : {'class':'form-control'}}) }}
             </div>
             </div>
             <div class="col-md-4">
         <div class="form-group">
           {{ form_row(edit_form.pays,{'attr' : {'class':'form-control'}}) }}
              </div>
              </div></div>
         <div class="form-group">
               {{ form_row(edit_form.description,{'attr' : {'class':'form-control'}}) }}
                  </div>
   
<br>

{% if props %}
                  {% for p in props %}
                      {% if p.habitat == app.request.cookies.get('name') %}
                
         <div class="row">
           <div class="col-md-3">
              <div class="form-group">
                 <label class="h6" >{{ p.Nom }} :</label>
              </div>
            </div>
            <div class="col-md-9">
              <div class="form-group">
               <input name="{{ p.Nom }}" type="{{ p.input}}" class="form-control"  required/>
              </div>
            </div>
            </div>              
                    {% endif %} 
                  {% endfor %}
                  <br>
                  {% endif %}
            </div>


  <div class="row">
    {% for photo in photos %}
<div class="col-4" >
<div class="form-group">
<div class="toast show">
<div class="toast-header">
<a onclick="return confirm('Vouler vraiment supprimer la photo !')" href="{{ path('supprimerphoto',{'id':photo.id})}}" class="btn btn-danger btn-block">Supprimer</a>
  </div>
  <div class="toast-body">
    <img src="{{ asset('uploads/images/' ~ photo.Src ) }}" width="100%" height="100%">
  </div>
</div>
</div></div>
    {% endfor %}
    </div>
<br>

         <div class="form-group">
                 {{ form_row(edit_form.photos.Src,{'attr' : {'class':'form-control'}}) }}
                  
            </div>
            <br>


            <div class="row">
            <div class="col-md-6">
        <input type="submit" class="btn btn-success btn-block" value="Editer" />
    {{ form_end(edit_form) }}
</div>
    <div class="col-md-6">
            {{ form_start(delete_form) }}
                <input onclick="return confirm('Vouler vraiment supprimer cet annonce !')" class="btn btn-danger btn-block" type="submit" value="Supprimer">
            {{ form_end(delete_form) }}
     </div>
 </div>
    </div> 
    
    
    </div>
    </div>
           


           
    <script type="text/javascript">

function getCookie(name) {
  const value = `; ${document.cookie}`;
  const parts = value.split(`; ${name}=`);
  if (parts.length === 2) return parts.pop().split(';').shift();
}
       
        const selectPlayer = document.getElementById('habitat_type') ;
       if (selectPlayer.value != ""){
        selectPlayer.addEventListener('change', function() {
           var playerValue = selectPlayer.value ; 
           var x = selectPlayer.selectedIndex;
           document.cookie = "name = " + playerValue;
              location.reload();
        } ) ;
   
     document.getElementById('habitat_type').value = getCookie("name");}
           
</script>
{% endblock %}


   

